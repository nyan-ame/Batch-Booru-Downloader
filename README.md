# Batch Booru Downloader
Удобный и дружелюбный загрузчик со следующих сайтов, прост в освоении.
Поддерживаемые сайты:
* [Danbooru](https://danbooru.donmai.us/)
* [Gelbooru](https://gelbooru.com/)
* Sankaku ([Old](https://chan.sankakucomplex.com/), [New](https://sankaku.app/))
* Konachan ([SFW](https://konachan.net), [NSFW](https://konachan.com/))
* [yande.re](https://yande.re/url)
* [pixiv](https://pixiv.net)

# Очень важно!!!
Скрипты используют *имя_пользователя, api_ключ и user_id* для загрузки. 

Sankaku использует *логин/пароль* для авторизации.
>yande.re не использует никакой авторизации.

Для pixiv используется refresh_token, который скрипт получает при авторизации через встроенный браузер впервые (и каждый последующий раз, когда сессия протухает) (пока не работает. Всему виной поломка gppt библиотеки, что получает refresh_token после авторизации пользователя. Если вы каким-то образом всё-таки смогли этот токен получить, положите его в pixiv_token.json, что находится в папке config)

Для загрузки с Danbooru, Konachan и pixiv должен быть установлен браузер Google Chrome и [Chromedriver](https://googlechromelabs.github.io/chrome-for-testing/). Для более старых версий браузера скачать chromedriver можно [здесь](https://github.com/jsnjack/chromedriver/releases). **(ОБЯЗАТЕЛЬНО ТОЙ ЖЕ ВЕРСИИ, ЧТО И БРАУЗЕР)**.
Chromedriver нужно распаковать в папку со скриптом, чтобы итоговый путь выглядел так:

`.../Batch Booru Downloader v1.1/chromedriver.exe`
> В скрипт интегрирована версия для ***моего*** браузера (v126.0.6478.127)

# Известные проблемы
* На Danbooru имеется ограничение сессии в 30 минут, таково ограничение сайта и обойти его нельзя. Если вы с этим столкнулись, перезапустите скрипт, предварительно почистив пройденные ссылки (чтобы скрипт не пытался "перекачать" их)
* У Sankaku не отображается скорость загрузки. С чем связано и как починить - не знаю. У остальных сайтов такой проблемы нет.

## Инструкция по работе со скриптом
Прежде всего хочу отметить, что хоть у скрипта есть интерфейс `booru_gui.py`, Вы также можете запускать `/scripts/xxxxxx_downloader.py` руками, предварительно наполнив нужный буфер ссылками.
> Ссылки, которые скрипт будет брать, расположены в `.../Batch Booru Downloader/links/xxxxx.txt`.

0) Убедитесь, что у вас установлен [Python](https://www.python.org/downloads/) и [Google Chrome](https://www.google.com/intl/ru/chrome/?standalone=1)
   > Ссылка на Google Chrome ведёт на страницу с загрузкой оффлайн-установщика
1) Откройте командную строку в папке со скриптами (Нажать на адресную строку в проводнике, написать cmd и нажать Enter)
2) В командной строке напишите `pip install requests selenium beautifulsoup4 pixivpy3 Pillow gppt`, дождитесь установки необходимых библиотек.
3) Откройте `settings.json`. Укажите все данные для тех сайтов, с которых Вы собираетесь загружать. Ни в коем случае не оставлять какие-то переменные пустыми, иначе `booru_gui.py` не будет запускаться. Не забудьте сохранить изменения.
4) Запустите `booru_gui.py` (или любой из загрузочных скриптов; сначала выполните шаг ниже). 
  > Если был открыт gui, выберите желаемый загрузчик в панели сверху, после чего перейдите во вкладку ссылки и вставьте ссылки на посты, по одной на строку. Пустые строки допускаются.

  > Если будет открыт любой из загрузчиков, для начала откройте папку `Links`, после чего откройте файл с выбранным Вами сайтом для загрузки и вставьте туда ссылки, по одной на строку. Пустые строки допускаются.
5) Запустите загрузку кнопкой в gui (или запустите загрузочный скрипт). Начнётся загрузка, прогресс загрузки будет отображён. 

  > При выборе Danbooru или Konachan в качестве загрузчика, рядом с консолью/интерфейсом откроется chromedriver с просьбой пройти капчу Cloudflare. После прохождения капчи жмите Enter в консоли / "Продолжить (Cloudflare)" в интерфейсе, после чего загрузка начнётся.

  > Если вместо капчи открылась основная страница сайта / чёрная страница с кучей белого текста, также жмите Enter в консоли / "Продолжить (Cloudflare)" в интерфейсе, после чего загрузка начнётся.

6) Скрипт загружает файлы в `.../Batch Booru Downloader/Downloads/`. После окончания загрузки скрипт можно закрыть.

**Скрипт не ворует ваши api ключи и логины/пароли!!!**
> В этом вы можете удостовериться самостоятельно, открыв каждый из скриптов в любом текстовом редакторе.

Так выглядит интерфейс:

![Интерфейс скрипта](https://github.com/nyan-ame/Batch-Booru-Downloader/blob/main/2025-07-30_175632.png)
